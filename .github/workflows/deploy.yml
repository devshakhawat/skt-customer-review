name: Deploy to WordPress.org

on:
  push:
    tags:
      - "v*"

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Build assets
        run:  npm run build

      - name: WordPress Plugin Deploy
        uses: 10up/action-wordpress-plugin-deploy@stable
        env:
          SVN_USERNAME: ${{ secrets.SVN_USERNAME }}
          SVN_PASSWORD: ${{ secrets.SVN_PASSWORD }}
          SLUG: product-reviews
          EXCLUDE: |
            build.sh
            mix-manifest.json
            webpack.config.js
            node_modules
            webpack.mix.js
            .babelrc
            .eslintrc.json
            .stylelintrc.json
            .gitignore
            package.json
            package-lock.json
            composer.json
            composer.lock
            .github
            dev
            *.md